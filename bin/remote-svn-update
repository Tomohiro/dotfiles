#!/bin/bash

set -e

# Show usage

    usage()
    {
        echo "Usage:"
        echo "   "`basename $0`" [Options]"
        echo
        echo "[Options]"
        echo "   --remote|-r [hostname]"
        echo "   --dir|-d    [dirname]"
        echo "   --help|-h   Show this usage"
    }

# Parse options

    if [ $# -ne 0 ]; then
        while (( $# > 0 ))
        do
            token=$1
            shift;
            case $token in
                --remote|-r) host=$1 ;;
                --dir|-d) dir=$1 ;;
                --help|-h) usage exit 0 ;;
            esac
        done
    fi

    if [ -z $host -o -z $dir ]; then
        usage
        exit 1
    fi


# do svn update at remote server

    result=`ssh $host "cd $dir; svn update"`
    echo $result
    exit 0
